{"version":3,"sources":["ws-client.js","app.js","main.js"],"names":["socket","init","url","WebSocket","console","log","registerOpenHandler","handler","onopen","registerMessageHandler","onmessage","e","data","JSON","stringify","sendMessage","payload","send","ChatApp","message","ChatMessage","serialize","m","user","u","timestamp","t","Date","getTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,MAAJ;;AAEA,SAASC,IAAT,CAAcC,GAAd,EAAmB;AACfF,EAAAA,MAAM,GAAG,IAAIG,SAAJ,CAAcD,GAAd,CAAT;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AAED,SAASC,mBAAT,CAA6BC,OAA7B,EAAqC;AACjCP,EAAAA,MAAM,CAACQ,MAAP,GAAgB,YAAK;AACjBJ,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAE,IAAAA,OAAO;AACV,GAHD;AAIH;;AAED,SAASE,sBAAT,CAAgCF,OAAhC,EAAwC;AACpCP,EAAAA,MAAM,CAACU,SAAP,GAAmB,UAACC,CAAD,EAAM;AACrBP,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBM,CAAC,CAACC,IAAzB;AACA,QAAIA,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeH,CAAC,CAACC,IAAjB,CAAX;AACAL,IAAAA,OAAO,CAACK,IAAD,CAAP;AACH,GAJD;AAKH;;AAED,SAASG,WAAT,CAAqBC,OAArB,EAA6B;AACzBhB,EAAAA,MAAM,CAACiB,IAAP,CAAYJ,IAAI,CAACC,SAAL,CAAeE,OAAf,CAAZ;AACH;;eAEa;AACVf,EAAAA,IAAI,EAAJA,IADU;AAEVK,EAAAA,mBAAmB,EAAnBA,mBAFU;AAGVG,EAAAA,sBAAsB,EAAtBA,sBAHU;AAIVM,EAAAA,WAAW,EAAXA;AAJU;;;;;;;;;;AC1Bd;;;;;;;;;;IAEMG,UACF,mBAAc;AAAA;;AACdd,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACIL,oBAAOC,IAAP,CAAY,qBAAZ;;AACAD,oBAAOM,mBAAP,CAA2B,YAAM;AAC7B,QAAIa,OAAO,GAAG,IAAIC,WAAJ,CAAgB;AAACD,MAAAA,OAAO,EAAE;AAAV,KAAhB,CAAd;;AACAnB,sBAAOe,WAAP,CAAmBI,OAAO,CAACE,SAAR,EAAnB;AACH,GAHD;;AAIArB,oBAAOS,sBAAP,CAA8B,UAACG,IAAD,EAAU;AACpCR,IAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AACH,GAFD;AAGH;;IAGCQ;AACF,6BAIG;AAAA,QAHUE,CAGV,QAHCH,OAGD;AAAA,yBAFCI,IAED;AAAA,QAFOC,CAEP,0BAFW,QAEX;AAAA,8BADCC,SACD;AAAA,QADYC,CACZ,+BADe,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EACd;;AAAA;;AACC,SAAKT,OAAL,GAAeG,CAAf;AACA,SAAKC,IAAL,GAAYC,CAAZ;AACA,SAAKC,SAAL,GAAiBC,CAAjB;AACH;;;;WACD,qBAAW;AACP,aAAM;AACFH,QAAAA,IAAI,EAAE,KAAKA,IADT;AAEFJ,QAAAA,OAAO,EAAE,KAAKA,OAFZ;AAGFM,QAAAA,SAAS,EAAE,KAAKA;AAHd,OAAN;AAKH;;;;;;eAIaP;;;;;ACpClB;;;;AACA,IAAIA,YAAJ","file":"main.js","sourceRoot":"..\\src","sourcesContent":["let socket;\r\n\r\nfunction init(url) {\r\n    socket = new WebSocket(url);\r\n    console.log('connecting...');\r\n}\r\n\r\nfunction registerOpenHandler(handler){\r\n    socket.onopen = () =>{\r\n        console.log('open');\r\n        handler();\r\n    };\r\n}\r\n\r\nfunction registerMessageHandler(handler){\r\n    socket.onmessage = (e) =>{\r\n        console.log('message', e.data);\r\n        let data = JSON.stringify(e.data);\r\n        handler(data);\r\n    };\r\n}\r\n\r\nfunction sendMessage(payload){\r\n    socket.send(JSON.stringify(payload));\r\n}\r\n\r\nexport default{\r\n    init,\r\n    registerOpenHandler,\r\n    registerMessageHandler,\r\n    sendMessage\r\n}","import socket from './ws-client';\r\n\r\nclass ChatApp {\r\n    constructor() {\r\n    console.log('Hello ES6!');\r\n        socket.init('ws://localhost:3001');\r\n        socket.registerOpenHandler(() => {\r\n            let message = new ChatMessage({message: 'pow!'});\r\n            socket.sendMessage(message.serialize());\r\n        });\r\n        socket.registerMessageHandler((data) => {\r\n            console.log(data);\r\n        });\r\n    }\r\n   }\r\n\r\nclass ChatMessage {\r\n    constructor( {\r\n        message: m,\r\n        user: u = 'batman',//change to any user\r\n        timestamp: t=(new Date()).getTime()\r\n    }) {\r\n        this.message = m;\r\n        this.user = u;\r\n        this.timestamp = t;\r\n    }\r\n    serialize(){\r\n        return{\r\n            user: this.user,\r\n            message: this.message,\r\n            timestamp: this.timestamp\r\n        };\r\n    }\r\n\r\n}\r\n\r\n   export default ChatApp;","import ChatApp from './app';\r\nnew ChatApp();"]}